# Time MCP Server - å•å…ƒæµ‹è¯•æŒ‡å—

## ğŸ§ª å•å…ƒæµ‹è¯•æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨ Vitest ä½œä¸ºæµ‹è¯•æ¡†æ¶ï¼Œæä¾›äº†å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

## ğŸ“Š æµ‹è¯•ç»Ÿè®¡

- **æµ‹è¯•æ–‡ä»¶**: 2 ä¸ª
- **æµ‹è¯•ç”¨ä¾‹**: 65 ä¸ª
- **é€šè¿‡ç‡**: 100%
- **è¦†ç›–èŒƒå›´**: æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½

## ğŸš€ è¿è¡Œæµ‹è¯•

### åŸºæœ¬æµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
pnpm test:coverage

# ç›‘è§†æ¨¡å¼ï¼ˆä»£ç å˜åŒ–æ—¶è‡ªåŠ¨é‡æ–°è¿è¡Œï¼‰
pnpm test:watch
```

### æµ‹è¯•æ–‡ä»¶

- `tests/index.test.ts` - ç›´æ¥åŠŸèƒ½æµ‹è¯•
- `tests/functions.test.ts` - ç‹¬ç«‹å‡½æ•°å•å…ƒæµ‹è¯•

## ğŸ“ æµ‹è¯•è¦†ç›–çš„åŠŸèƒ½

### 1. getWeekDates åŠŸèƒ½

- âœ… æ­£å¸¸å‘¨æ•°è®¡ç®—
- âœ… å¹´åˆç¬¬ä¸€å‘¨å¤„ç†
- âœ… å¹´æœ«ç¬¬53å‘¨è¾¹ç•Œæƒ…å†µ
- âœ… è·¨å¹´å‘¨å¤„ç†
- âœ… æ—¥æœŸèŒƒå›´éªŒè¯ï¼ˆ7å¤©ï¼‰
- âœ… å‘¨ä¸€å¼€å§‹éªŒè¯

### 2. getWorkdays åŠŸèƒ½

- âœ… è¿”å›5ä¸ªå·¥ä½œæ—¥
- âœ… å‘¨ä¸€åˆ°å‘¨äº”éªŒè¯
- âœ… å¤šç§æ—¥æœŸæ ¼å¼æ”¯æŒ
- âœ… ä¸­æ–‡æ—¥æœŸæ ¼å¼
- âœ… è·¨å¹´å·¥ä½œæ—¥å¤„ç†
- âœ… é»˜è®¤æ ¼å¼å¤„ç†

### 3. getCurrentTime åŠŸèƒ½

- âœ… UTCå’Œæœ¬åœ°æ—¶é—´è¿”å›
- âœ… æ—¶åŒºæ”¯æŒ
- âœ… æ ¼å¼åŒ–è¾“å‡º

### 4. getRelativeTime åŠŸèƒ½

- âœ… è¿‡å»æ—¶é—´å¤„ç†
- âœ… æœªæ¥æ—¶é—´å¤„ç†
- âœ… å½“å‰æ—¶é—´å¤„ç†

### 5. getTimestamp åŠŸèƒ½

- âœ… å½“å‰æ—¶é—´æˆ³
- âœ… æŒ‡å®šæ—¶é—´æˆ³
- âœ… ISOæ ¼å¼æ”¯æŒ
- âœ… ä¸€è‡´æ€§éªŒè¯

### 6. getDaysInMonth åŠŸèƒ½

- âœ… å½“å‰æœˆä»½å¤©æ•°
- âœ… 31å¤©æœˆä»½ï¼ˆ1æœˆï¼‰
- âœ… 28å¤©æœˆä»½ï¼ˆ2025å¹´2æœˆï¼‰
- âœ… 29å¤©æœˆä»½ï¼ˆ2024å¹´é—°å¹´2æœˆï¼‰
- âœ… 30å¤©æœˆä»½ï¼ˆ4æœˆï¼‰
- âœ… ä¸åŒæ—¥æœŸæ ¼å¼

### 7. getWeekOfYear åŠŸèƒ½

- âœ… å½“å‰æ—¥æœŸå‘¨æ•°
- âœ… æŒ‡å®šæ—¥æœŸå‘¨æ•°
- âœ… ä¸åŒæ—¥æœŸæ ¼å¼
- âœ… ç»“æœä¸€è‡´æ€§
- âœ… å¹´åº¦è½¬æ¢æ—¥æœŸ

### 8. é”™è¯¯å¤„ç†

- âœ… æ— æ•ˆæ—¥æœŸæ ¼å¼å¤„ç†
- âœ… è¾¹ç•Œæƒ…å†µæ—¥æœŸ
- âœ… æ— æ•ˆå‘¨æ•°å¤„ç†

## ğŸ”§ æµ‹è¯•é…ç½®

### Vitest é…ç½® (`vitest.config.ts`)

```typescript
export default defineConfig({
  test: {
    globals: true,
    environment: 'node',
    include: ['src/**/*.test.ts'],
    coverage: {
      reporter: ['text', 'json', 'html'],
      exclude: [
        'node_modules/',
        'dist/',
        '**/*.d.ts',
        '**/*.test.ts',
      ],
    },
  },
});
```

### æµ‹è¯•è„šæœ¬ (`package.json`)

```json
{
  "scripts": {
    "test": "vitest",
    "test:watch": "vitest watch",
    "test:coverage": "vitest run --coverage",
    "test:ui": "vitest --ui"
  }
}
```

## ğŸ“ˆ è¦†ç›–ç‡æŠ¥å‘Š

è¿è¡Œ `pnpm test:coverage` åä¼šç”Ÿæˆè¯¦ç»†çš„è¦†ç›–ç‡æŠ¥å‘Šï¼ŒåŒ…æ‹¬ï¼š

- è¯­å¥è¦†ç›–ç‡
- åˆ†æ”¯è¦†ç›–ç‡
- å‡½æ•°è¦†ç›–ç‡
- è¡Œè¦†ç›–ç‡

æŠ¥å‘Šæ ¼å¼ï¼š

- **æ–‡æœ¬**: æ§åˆ¶å°è¾“å‡º
- **JSON**: æœºå™¨å¯è¯»æ ¼å¼
- **HTML**: ç½‘é¡µå¯è§†åŒ–æŠ¥å‘Š

## ğŸ¯ æµ‹è¯•æœ€ä½³å®è·µ

### 1. æµ‹è¯•ç»“æ„

```typescript
describe('åŠŸèƒ½æ¨¡å—', () => {
  describe('å…·ä½“åŠŸèƒ½', () => {
    it('åº”è¯¥åšä»€ä¹ˆ', () => {
      // æµ‹è¯•ä»£ç 
    });
  });
});
```

### 2. æµ‹è¯•åŸåˆ™

- **ç‹¬ç«‹æ€§**: æ¯ä¸ªæµ‹è¯•åº”è¯¥ç‹¬ç«‹è¿è¡Œ
- **å¯é‡å¤æ€§**: æµ‹è¯•ç»“æœåº”è¯¥ä¸€è‡´
- **å…¨é¢æ€§**: è¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸æƒ…å†µ
- **å¯è¯»æ€§**: æµ‹è¯•åç§°æ¸…æ™°æè¿°æµ‹è¯•ç›®çš„

### 3. æ–­è¨€ä½¿ç”¨

```typescript
// åŸºæœ¬æ–­è¨€
expect(result).toBe(expected);
expect(result).toEqual(expected);
expect(result).toHaveLength(5);

// ç±»å‹æ£€æŸ¥
expect(typeof result).toBe('string');
expect(result).toHaveProperty('property');

// å¼‚å¸¸æµ‹è¯•
expect(() => func()).toThrow();
```

## ğŸ” è°ƒè¯•æµ‹è¯•

### 1. è¿è¡Œç‰¹å®šæµ‹è¯•

```bash
# è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
pnpm test src/functions.test.ts

# è¿è¡Œç‰¹å®šæµ‹è¯•ç”¨ä¾‹
pnpm test -- --reporter=verbose
```

### 2. è°ƒè¯•æ¨¡å¼

```bash
# ä½¿ç”¨ Node.js è°ƒè¯•å™¨
pnpm test -- --inspect-brk

# ä½¿ç”¨ VS Code è°ƒè¯•
# åœ¨ .vscode/launch.json ä¸­é…ç½®è°ƒè¯•é…ç½®
```

## ğŸ“ æ·»åŠ æ–°æµ‹è¯•

### 1. ä¸ºæ–°åŠŸèƒ½æ·»åŠ æµ‹è¯•

```typescript
describe('æ–°åŠŸèƒ½', () => {
  it('åº”è¯¥æ­£å¸¸å·¥ä½œ', () => {
    const result = newFunction(params);
    expect(result).toBe(expected);
  });

  it('åº”è¯¥å¤„ç†è¾¹ç•Œæƒ…å†µ', () => {
    const result = newFunction(edgeCaseParams);
    expect(result).toBe(expected);
  });
});
```

### 2. æµ‹è¯•å·¥å…·å‡½æ•°

é¡¹ç›®æä¾›äº†æµ‹è¯•å·¥å…·å‡½æ•°ï¼Œå¯ä»¥åœ¨ `functions.test.ts` ä¸­æ‰¾åˆ°æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½çš„æµ‹è¯•å®ç°ã€‚

## ğŸš€ CI/CD é›†æˆ

æµ‹è¯•å¯ä»¥è½»æ¾é›†æˆåˆ° CI/CD æµç¨‹ä¸­ï¼š

```yaml
# GitHub Actions ç¤ºä¾‹
- name: Run tests
  run: pnpm test

- name: Generate coverage
  run: pnpm test:coverage

- name: Upload coverage
  uses: codecov/codecov-action@v3
```

## ğŸ‰ æ€»ç»“

- âœ… å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
- âœ… é«˜è´¨é‡çš„æµ‹è¯•ç”¨ä¾‹
- âœ… è¾¹ç•Œæƒ…å†µå’Œé”™è¯¯å¤„ç†æµ‹è¯•
- âœ… æ˜“äºç»´æŠ¤å’Œæ‰©å±•
- âœ… æ”¯æŒæŒç»­é›†æˆ

è¿™ä¸ªæµ‹è¯•æ¡†æ¶ç¡®ä¿äº†ä»£ç è´¨é‡å’ŒåŠŸèƒ½ç¨³å®šæ€§ï¼Œæ˜¯é¡¹ç›®å¯é æ€§çš„é‡è¦ä¿éšœã€‚
